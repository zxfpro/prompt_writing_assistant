
import pytest
from prompt_writing_assistant.prompt_helper import intellect,IntellectType
from prompt_writing_assistant.utils import super_print
from prompt_writing_assistant.utils import extract_article,extract_json

from dotenv import load_dotenv
load_dotenv()

#########--时空光年-数字人生--#############
"""
0098 数字分身简介
0099 数字分身性格提取
0100 # 数字分身信息脱敏
"""

memory_cards = ["我出生在东北辽宁葫芦岛下面的一个小村庄。小时候，那里的生活比较简单，人们日出而作，日落而息，生活节奏非常有规律，也非常美好。当时我们都是山里的野孩子，没有什么特别的兴趣爱好，就在山里各种疯跑。我小时候特别喜欢晚上看星星，那时的夜晚星星非常多，真的是那种突然就能看到漫天繁星的感觉。",
                  "在我高中的时候，我对天文物理和理论物理就非常感兴趣。我当时高中是在我们县城里读的，资源没有那么丰富，我们所有的精力都放在学科的学习上。",
                  "离开泸沽湖之后，我和我的义工搭子一起去了虎跳峡徒步。在徒步过程中，我们还看到了日照金山。当时我们徒步到半山腰的一个临时扎点时，正好看到这个美景，非常激动地拍了照。能在徒步途中遇到这样的美景，确实让人兴奋不已。在虎跳峡徒步之后，我们在丽江休整了一天，然后就各自前往下一个目的地了。",
                  "我第一份职业是产品经理，当时在国内一家做专网通信的龙头企业。目前我是一位AI产品经理。",
                  "我记得在我小的时候，大概是在我三四年级的时候，我和我的小伙伴一块去上山抓蝎子。小时候那会儿都比较皮，到处跑。我在山上去翻蝎子的时候，遇到了一条蛇！我和它对视过后，我就慌忙地转身逃跑。在我刚转身逃跑的时候，我看见山上的小路上有一个树枝倒下来了，倒在我的前面，然后我就跳了起来。在我跳起来的时候，那条蛇就在我的脚底下钻过去了，当时真的吓得我很害怕。如果不是那个树枝的话，我可能就被咬了。而且那条蛇，我记得它是三角脑袋，枯草色的，看着像是有毒的样子。之后我对山上有些阴影了，都不怎么去上山抓蝎子了。我现在上山还是会拿根棍子，到处敲一敲！说实话，真的有阴影。",
                  "我在凉山州做项目期间，曾替客户背过一次“黑锅”。那次是我们接处警的项目刚刚上线，因为项目是在凉山州做的，所以我们在西昌市驻扎。当地有两个公安局，一个是州公安局，一个是市公安局。上线当天，我们原定在州公安局开新闻发布会，市公安局这边会同步进行。但就在当天早上，我被客户叫到了市公安局，本该去参加发布会的我被临时调动。客户告诉我，市公安局的大领导、局长可能会来问些问题，让我再去给他讲讲我们的系统。于是我直接去了市公安局，没有去参加发布会。\n\n当时叫我去的是客户那边的对接人，一位指挥长。在他们开新闻发布会的时候，我们就在后面聊天，并给他讲一些系统的事情，因为我们关系都比较熟了。发布会结束后，公安局的局长说要让我调一份接警的录音出来。这事儿是因为他们下面有一个派出所警员在接警过程中，对接警员的态度不好，局长比较生气，说要调出证据去处罚他，认为他既然对自己的同志态度都不好，那对待民众的态度肯定会更不好。他只要那份录音文件，让我从我们的系统里导出来。\n\n局长要在他们全市的公安局领导面前播放这份录音，但是他们播放的设备不能直接登录我们的系统，所以我需要把录音文件导出来，再插到他们播放的电脑上去播放。我找到U盘后，因为我在那块待的时间比较长，比较熟，就想把音频文件直接导到他们的电脑上，然后播放出来。结果，他们的电脑比较老旧，U盘识别不了，没有驱动，导致播放不了。我尝试了各种方法也不行。就在这时，局长本来就在气头上，他更生气了。他一开始以为我是他们局内的人，是信息部的，就冲我发了脾气，说我办事不力，问我是哪个部门的。我告诉他，我是这个系统公司的人，不是他们公安局的人。\n\n局长当时已经放出话来，他说我们的系统做的不好，不能直接播放录音，但其实是能播放的，只不过是他们自己内部系统的一些问题。我想解释，但局长没有给我解释的机会，他就在那里一直守着，在所有公安局的人面前指着我的鼻子数落我，还让我把我的领导叫来。他甚至说，如果系统做得不好，可以不采用我们的系统。我当时内心并没有太多感受，因为我知道这不是我的问题，我只是替他们背了一个锅而已。后来他们的人接手了，开始处理他们电脑的问题。局长也发现是他们的人一直在处理问题，也意识到了是他们自己的问题，跟我们没关系。但他还是把我们的领导叫来了。在这个过程中，我们客户，也就是公安局的那个主任，还在旁边小声安慰我说：“没事没事，领导发完火就过去了。”其实我内心是不在乎的。\n\n我的领导也很懵，因为他们正在那边开新闻发布会，突然把我的领导，还有公安局和我对接的那些负责人都叫来了。他们以为出了什么问题，大领导发大火。他们比较懵，但是叫来之后，局长也没有说什么，说了一些无关紧要的东西，做了一些指示。就这样，我默默地背了一个锅。这件事情对我的工作选择没有什么影响，因为我知道这不是我的问题，领导们也知道我只是背了一个锅，这事就这么过去了。能被局长兼副市长指着鼻子骂，对我来说也是一种特殊的体验"]


chat_history = 'ai:柴东升，在凉山州做项目期间有什么特别的经历吗？\nhuman:有一次在项目现场，我替客户背了黑锅。\nai:哦？是怎样的情况呢？愿意和我详细说说吗？\nhuman:这个说起来有点花长了。\nai:人生故事总是值得慢慢品味的，不着急，您慢慢说。\nhuman:那一次是我们那个接触景的项目刚刚上线，然后因为我们是在梁山州做的项目。 那我们是在他的西昌市去那个柱上，然后他那里面是有两个公安局，一个是州公安局，一个是市公安局。 然后上线当天我们是就准备开一个新媒发新闻发。 发布会的和公安局的领导们一起，然后他们是在州公安局进行开，然后市公安局这边会有一个同步，然后， 但在当天早上，我被客户叫到了。本来我也是要到周公安局去参加这个发布会的。嗯，然后我临时被客户调到了市公安局。 客户说，公安局的大领导、局长可能会来问。 点问题让我再去给他讲一讲他的那个咱们那个我们那个系统，然后我就直接去到了市公安局，没有去那个我们的发布会。\nai:当时的情况听起来还挺紧急的，您被临时调去市公安局后，又发生了什么呢？\nhuman:然后因为当时叫我去的是嗯，客户的那边，我们的对接人吗？是一个指挥长，然后在他们开发布会的过程中，我们就在后面。 唠嗑，然后并给他讲一些系统，因为我们关系都比较熟了。然后再看看发布会之后，局长。 公安局去找，说要让我掉一份。嗯，接警的录音出来。嗯。 这个是因为他们下面有一个警员在接警的过程中对接警员的态度不好局长比较生气说调出来证据 去那个处罚的说，他既然对自己的同志态度都这么不好，那对待民众又会态度指定会更不好。 他只要那份录音文件让我，再让我在我们系统里给导出来。\nai:原来如此，那您之后成功帮局长导出那份录音文件了吗？\nhuman:是的，我因为他们那个局长要在他们全市的全公安局的领导面前把这个录音播出来。 但是他们播放的那个设备是不能直接登我们这个系统的，所以说我需要把这种 u 盘，把这个录音给找出来。 倒出来之后，然后再插到他们那个播放的电脑上去播放。嗯，我倒出来之后就嗯。\nai:您这么快就找到了录音文件，真是厉害。之后在播放过程中没有出现什么问题吧？\nhuman:是的，出了问题，嗯，我找到 u 盘之后，然后我看也没有人接手，我就去，因为我在那块待的时间比较长，比较熟。 我就想把那个音频文件直接倒到他们的电脑上，然后我给拨出来，结果他们那个电脑比较老了。 u 盘识别不了，那有驱动。 就导致他们那播放不了，然后我捅破了以后一下。 尝试这些方法也不行，就在这会儿，因为那个局长本来就在气头上，他就生气了。他一开始以为我是他们局内的人。 那个是他们信息部的，然后就冲我发了脾气，说我办事不力，然后问我是哪个部门。 是要出发。 那个时候说话就问我是哪个部门的。 然后我说我是这个系统的。 公司的人，不是他们公安局的人。\nai:哎呀，当时局长发脾气，您一定很委屈吧。后来呢，他们有没有因为这个事情为难您？\nhuman:然后但是局长口子已经开出来了，然后他就说我们系统不能直接那个。 播放这个录音怎么样？但其实是能播放的，只不过他们自己内部系统的一些问题我想解释，但是。 居然没有给我解释的机会，他不让那个他就在那一直守着，我真的是在全关机。 人的面前指着我的鼻子数落我，然后让我把我的领导叫来。 还说他一句话，还说他可以，如果我系统做得不好，可以不采用我们的系统。\nai:局长这么强势，您当时一定很无助。那您之后是怎么应对这种情况的呢？\nhuman:其实我当时内心是没有什么太多的感受的，因为我知道这不是我的问题，我只是替他们背了一个锅而已。 然后来他们的人就接手了，嗯，开始处理他们电脑的问题，嗯，后来他们的局长也发现。 是他们的人一直在处理问题，也意识到了是他们系统的问题，跟我们没关系。 然后但是还是把我的我们的领导叫来了，然后在这个过程中，他们公安局，我们客户嘛，我们对接的那个主任在孩子旁边小型的安慰我说那个没事没事，那个他发完会，领导发完火就过去了，就没事。 开始其实我内心是不在乎的\nai:您能这么快调整心态，真的很了不起。那后来您的领导来了之后，又发生了什么呢？\nhuman:领导也很萌，因为他们正在那边开新闻发布会，把我的领导，还有公安局和我对接的那些负责人都叫来了。 他们以为出了什么问题，大领导发大火。 他们比较猛，但是叫来之后，共局长也没有收这个身，受了一些无关紧要的东西，做了一些知识。 就这样就默默地背了一个锅。\nai:这事儿还真是挺曲折的。那经历了这件事，您对工作是不是有了新的认识呀？\nhuman:还好，也没有什么新的认识，我认为这都算是一种经历。 能被局长兼副市长指着给他妈，也是一种特殊的体验。\nai:您的心态真的很好呢。那在凉山州的这段经历，对您之后的工作选择有影响吗？\nhuman:没有什么影响，你以为我知道这不是我的问题，他领导们也知道我是背了一个锅，这个事就这么过去了。\nai:如此甚好。那我们再聊聊您的旅行吧，离开泸沽湖后，您又去了哪里呢？\nhuman:离开泸沽湖之后，我和我的那个义工搭子，我们一起去了虎跳峡徒步。\nai:徒步虎跳峡呀，这可真是一项很有挑战性又有趣的活动。你们在徒步过程中有遇到什么难忘的风景或事情吗？\nhuman:有，当时我们在还看到了日照金山。\nai:日照金山的美景可不常见，您真的很幸运呢。那一幕一定非常震撼吧，有没有拍照记录下来呀？\nhuman:有，当时我们很激动的拍了照，因为当时正好是徒步到那个半山腰的时候。嗯，看到的到了一个，临时的一个。 制扎点看到了，当时还挺兴奋的。\nai:能在徒步途中遇到这样的美景，确实会让人兴奋不已。那之后你们又去了哪里呢？\nhuman:我们在虎秀峡徒步之后， 在丽江休整了一天，然后就。 就去各自的下一个目的地了\n'
# 半自动编写/优化提示词





# 简要版说法

def test_0080():
    # 0080 prompt_get_infos
    demand = """
prompt_get_infos
"""
    @intellect(IntellectType.inference,"0080",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    user_name = "柴东升"
    vitae = 12312
    result = prompts(f"{user_name},{vitae},{"\n".join(memory_cards)}")
    print(result,'result')

def test_0081():
    # 0081 prompt_base
    demand = """
prompt_base
"""
    @intellect(IntellectType.inference,"0081",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    user_name = "柴东升"
    vitae = 12312
    result = prompts(f"{user_name},{vitae},{"\n".join(memory_cards)}")
    print(result,'result')


def test_0082():
    # 0082 素材增量生成
    demand = """
素材增量生成
"""
    @intellect(IntellectType.inference,"0082",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    input_ = """
#素材:
### 张三 自传素材整理 (精修版 - 按人物刻画与时间主线梳理)

**核心人物：张三**
*   **姓名：** 张三
*   **性别：** 男
*   **出生日期：** 1980年
*   **出生地：** 辽宁葫芦岛小村庄 (根据记忆卡片，修正简历中“北京”为户籍地或后期迁居地，待核实)
*   **职业：** 某AI公司首席科学家
*   **当前城市：** (未提供)
*   **人物标签：** 自然探索者、求知者、哲思者、理论物理爱好者、实践者
*   **核心愿景：** 探索世界本质，追求知识，从自然中获取灵感，活出规律而美好的生活。

---

### 主要人物刻画与关系网

*(记忆卡片中未提及具体人物，此部分暂无内容。)*

---

### 张三 时间主线与探索轨迹

**人生主线：** 从东北小村庄的自由童年启蒙，到高中时期对深奥物理学的热情探索，张三的人生轨迹贯穿着对自然的好奇、对知识的渴望以及持续的自我发现。

*   **童年与自然启蒙 (约1980年代 - 1995年前，辽宁葫芦岛小村庄)**
    *   **背景：** 出生于东北辽宁葫芦岛的一个小村庄，生活节奏简单、规律而美好，充满田园气息。
    *   **塑造/关键事件：**
        *   作为“山里的野孩子”，在自然中自由奔跑，体验无拘无束的童年，培养了对自然的亲近感。
        *   夜晚仰望“漫天繁星”的经历，是其早期对宇宙、对未知世界产生强烈好奇心和探索欲的萌芽，为其后来的科学兴趣奠定基础。
        *   简单的生活环境塑造了其对规律、美好和本真生活的初步认知。

*   **高中时期与知识探索 (约1995年左右，县城高中)**
    *   **背景：** 在资源相对有限的县城高中就读，学习重心主要集中在学科知识的掌握上。
    *   **塑造/关键事件：**
        *   在有限的学习条件下，对天文物理和理论物理产生了浓厚的兴趣，这显示出其强烈的内在驱动力和超越常规学习范围的求知欲。
        *   尽管环境可能不鼓励多元发展，但其对特定科学领域的专注，预示了其未来在深度探索上的潜力。

---

**张三 的“觉醒与探索”线索**

*   **自然作为第一启蒙：** 童年时期在山林间的自由奔跑和对星空的仰望，构成了其最初的“觉醒”，激发了对世界的好奇和探索的欲望。
*   **从感性到理性的飞跃：** 从对自然景象（漫天繁星）的直接感受，到高中时期对抽象的“天文物理和理论物理”的浓厚兴趣，展现了其思维从具象观察向理性、系统性思考的过渡。
*   **内在驱动的求知精神：** 即使在资源受限的高中阶段，其对物理学的热情依然强烈，表明其探索和学习的动力主要源于内在的兴趣和对知识本身的追求。
*   **对生活本质的思考：** 对童年“简单、规律、美好”生活的描述，暗示了其可能在追求高深科学的同时，也在追寻一种与自然和谐共处的生命状态。

---

### 金句与细节描绘

#### 🌟 金句摘录

*   “当时我们都是山里的野孩子，没有什么特别的兴趣爱好，就在山里各种疯跑。”
*   “我小时候特别喜欢晚上看星星，那时的夜晚星星非常多，真的是那种突然就能看到漫天繁星的感觉。”
*   “我们所有的精力都放在学科的学习上。”

#### 🎨 优美细节描绘

*   “我出生在东北辽宁葫芦岛下面的一个小村庄. 小时候，那里的生活比较简单，人们日出而作，日落而息，生活节奏非常有规律，也非常美好。”
*   “那时的夜晚星星非常多，真的是那种突然就能看到漫天繁星的感觉。”

---

### 图片素材备用

*   ![出生东北_1](http://39.96.146.47:8000/11.jpg)
*   ![高中的时候_1](http://39.96.146.47:8000/11.jpg)
#记忆卡片:
[{"title": "虎跳峡的初体验", "content": "我第一次徒步，是在虎跳峡。徒步的第二天中午，我们计划坐车回去。上午的时候，我们想去虎跳峡下面的那条江看一看。下去要一个小时，上来要一个多小时，而且都是很陡的台阶，非常累。我们下去拍完照之后，上来的时候，已经快到车发车的时间了。我和我的朋友为了赶上那趟车，就猛爬，使劲地爬。当时我们已经很累了，因为爬楼梯、爬那种台阶很累，但是为了赶上那趟车，我们还是一直在坚持跑。正好赶上那趟车准备发车的时候，我们刚到上面，刚好赶上车。上车之后，我们累得够呛，在车上睡了一觉就到丽江了。这次徒步对我来说，最大的收获就是开启了一个新的项目。![新的项目](http://39.96.146.47:8000/22.jpg)", "time": "2005年--月--日"}]    

"""
    result = prompts(input_)
    print(result,'result')

def test_0083():
    # 0083 传记简介
    demand = """
传记简介
"""
    @intellect(IntellectType.inference,"0083",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    inputs = """
{"第一部 自然的启蒙与内心的萌动（第一起：好奇心的觉醒）": [{"chapter_number": "第一章", "title": "山村野趣：生命与自然的初遇", "topic": "第三人称。描绘张三在辽宁葫芦岛小村庄的童年生活，强调其作为“山里的野孩子”与自然无拘无束的亲密接触。本章将展现东北乡村的淳朴与规律，为他日后对世界本质的探索奠定感性基础。这是张三生命中“第一起”的序章，塑造了他对自然最初的亲近感。"}, {"chapter_number": "第二章", "title": "星空下的低语：宇宙的呼唤", "topic": "第一人称。聚焦张三童年夜晚仰望漫天繁星的经历。探究这份经历如何在他心中播下对宇宙、未知世界的强烈好奇和探索欲的种子，成为他最早的“觉醒点”。这是“第一起”的核心，揭示了他求知欲和哲思精神的最初萌芽。"}], "第二部 知识的求索与思维的拓展（第一伏：理论探索的沉淀）": [{"chapter_number": "第三章", "title": "县城高中：物理世界的初窥门径", "topic": "第三人称。叙述张三在县城高中求学时期的经历。尽管学习资源有限，但他对天文物理和理论物理展现出浓厚兴趣。本章将展现他从感性自然体验转向理性科学探索的过程，预示其超越日常学习的求知欲。这是“第一伏”的开始，也是他知识体系构建的重要铺垫。"}, {"chapter_number": "第四章", "title": "从繁星到理论：抽象思维的跃迁", "topic": "第一人称。深入剖析张三从童年对具象星空的直观感受，到高中时期对抽象天文物理和理论物理的兴趣转变。本章将揭示他思维深度和广度的发展，以及这种从感性到理性的过渡如何塑造了他理解世界的方式。这是“第一伏”中的思维沉淀与能力提升。"}], "第三部 实践的拓展与意志的磨砺（第二起：身体力行的探索）": [{"chapter_number": "第五章", "title": "虎跳峡之行：开启“新项目”的宣言", "topic": "第三人称。描绘张三成年后在2005年首次徒步虎跳峡的经历。重点叙述他与朋友为了赶车，在极度疲惫下挑战陡峭台阶，最终坚持完成的过程。本章标志着他探索方式从纯粹知识求索向身体力行实践的延伸，是其“第二起”的开端，展现了他坚韧不拔的意志和开拓精神。"}, {"chapter_number": "第六章", "title": "征服与感悟：徒步中的生命哲学", "topic": "第一人称。深度挖掘张三在虎跳峡徒步过程中以及完成后的内心感受和思考。探讨这次“开启新项目”的经历如何拓展了他对世界的认知，以及在身体极限状态下对毅力、目标导向和自我突破的领悟。这是“第二起”的核心，展现了他通过实践丰富生命体验的哲学。"}], "第四部 规律与美好的追寻（第二伏：生活哲学的构建）": [{"chapter_number": "第七章", "title": "童年记忆：规律生活的根基", "topic": "第一人称。回顾张三对葫芦岛小村庄“日出而作，日落而息”规律生活的记忆。本章将探讨这种简单而美好的生活节奏如何在他心中留下深刻印记，并影响他成年后对生活方式的选择与追求。这是“第二伏”的内在沉淀，是他对生命本真思考的体现。"}, {"chapter_number": "第八章", "title": "从自然到日常：构建美好生活", "topic": "第三人称。分析张三如何将童年对自然、规律和美好的向往融入其成年后的生活哲学。本章将探讨他如何在复杂的现代生活中，依然努力追求一种简单、有规律且充满美感的生命状态。这是“第二伏”的深化，是他将哲学思考付诸实践的体现。"}]}"""
    result = prompts(inputs)
    print(result,'result')

def test_0084():
    # 0084 大纲生成
    # 可以尝试回退来增强到30多个
    demand = """
我想你将章节数量控制在8-12个左右
"""
    @intellect(IntellectType.inference,"0084",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    input = """
### 张三 自传素材整理 (精修版 - 按人物刻画与时间主线梳理)

**核心人物：张三**
*   **姓名：** 张三
*   **性别：** 男
*   **出生日期：** 1980年
*   **出生地：** 辽宁葫芦岛小村庄 (根据记忆卡片，修正简历中“北京”为户籍地或后期迁居地，待核实)
*   **职业：** 某AI公司首席科学家
*   **当前城市：** (未提供)
*   **人物标签：** 自然探索者、求知者、哲思者、理论物理爱好者、实践者、**徒步爱好者**
*   **核心愿景：** 探索世界本质，追求知识，从自然中获取灵感，活出规律而美好的生活，**并通过实践拓展人生体验。**

---

### 主要人物刻画与关系网

*(记忆卡片中未提及具体人物，此部分暂无内容。)*

---

### 张三 时间主线与探索轨迹

**人生主线：** 从东北小村庄的自由童年启蒙，到高中时期对深奥物理学的热情探索，再到成年后对徒步等实践活动的投入，张三的人生轨迹贯穿着对自然的好奇、对知识的渴望以及持续的自我发现和体验拓展。

*   **童年与自然启蒙 (约1980年代 - 1995年前，辽宁葫芦岛小村庄)**
    *   **背景：** 出生于东北辽宁葫芦岛的一个小村庄，生活节奏简单、规律而美好，充满田园气息。
    *   **塑造/关键事件：**
        *   作为“山里的野孩子”，在自然中自由奔跑，体验无拘无束的童年，培养了对自然的亲近感。
        *   夜晚仰望“漫天繁星”的经历，是其早期对宇宙、对未知世界产生强烈好奇心和探索欲的萌芽，为其后来的科学兴趣奠定基础。
        *   简单的生活环境塑造了其对规律、美好和本真生活的初步认知。

*   **高中时期与知识探索 (约1995年左右，县城高中)**
    *   **背景：** 在资源相对有限的县城高中就读，学习重心主要集中在学科知识的掌握上。
    *   **塑造/关键事件：**
        *   在有限的学习条件下，对天文物理和理论物理产生了浓厚的兴趣，这显示出其强烈的内在驱动力和超越常规学习范围的求知欲。
        *   尽管环境可能不鼓励多元发展，但其对特定科学领域的专注，预示了其未来在深度探索上的潜力。

*   **成年后的实践与新爱好 (约2005年，云南虎跳峡)**
    *   **背景：** 在某个时间点，张三开始尝试新的实践活动，徒步成为其中一项。
    *   **塑造/关键事件：**
        *   **虎跳峡徒步初体验（2005年）：** 第一次徒步经历，在虎跳峡挑战陡峭的台阶。为了赶车，与朋友一起“猛爬，使劲地爬”，在身体极度疲惫的情况下仍坚持完成。
        *   这次经历不仅考验了其体能和毅力，更重要的是“开启了一个新的项目”，标志着其从纯粹的知识探索向身体力行的实践探索的延伸，丰富了其探索世界的方式。这次经历也展现了其在面对挑战时，目标导向和坚韧不拔的特质。

---

**张三 的“觉醒与探索”线索**

*   **自然作为第一启蒙：** 童年时期在山林间的自由奔跑和对星空的仰望，构成了其最初的“觉醒”，激发了对世界的好奇和探索的欲望。
*   **从感性到理性的飞跃：** 从对自然景象（漫天繁星）的直接感受，到高中时期对抽象的“天文物理和理论物理”的浓厚兴趣，展现了其思维从具象观察向理性、系统性思考的过渡。
*   **内在驱动的求知精神：** 即使在资源受限的高中阶段，其对物理学的热情依然强烈，表明其探索和学习的动力主要源于内在的兴趣和对知识本身的追求。
*   **对生活本质的思考：** 对童年“简单、规律、美好”生活的描述，暗示了其可能在追求高深科学的同时，也在追寻一种与自然和谐共处的生命状态。
*   **实践拓展与毅力展现：** 成年后的虎跳峡徒步，标志着其探索方式的拓展，从书本和理论走向了身体力行的实践。在极度疲惫下依然坚持完成目标，体现了其坚韧不拔的意志力，也揭示了其通过亲身体验来“开启新项目”的探索精神。

---

### 金句与细节描绘

#### 🌟 金句摘录

*   “当时我们都是山里的野孩子，没有什么特别的兴趣爱好，就在山里各种疯跑。”
*   “我小时候特别喜欢晚上看星星，那时的夜晚星星非常多，真的是那种突然就能看到漫天繁星的感觉。”
*   “我们所有的精力都放在学科的学习上。”
*   **“这次徒步对我来说，最大的收获就是开启了一个新的项目。”**

#### 🎨 优美细节描绘

*   “我出生在东北辽宁葫芦岛下面的一个小村庄. 小时候，那里的生活比较简单，人们日出而作，日落而息，生活节奏非常有规律，也非常美好。”
*   “那时的夜晚星星非常多，真的是那种突然就能看到漫天繁星的感觉。”
*   **“下去要一个小时，上来要一个多小时，而且都是很陡的台阶，非常累。”**
*   **“我和我的朋友为了赶上那趟车，就猛爬，使劲地爬。当时我们已经很累了，因为爬楼梯、爬那种台阶很累，但是为了赶上那趟车，我们还是一直在坚持跑。”**

---

### 图片素材备用

*   **出生东北_1:** http://39.96.146.47:8000/11.jpg
*   **高中的时候_1:** http://39.96.146.47:8000/11.jpg
*   **虎跳峡徒步_1:** (待补充，如果后续有图片链接)
"""
    result = prompts(input)
    print(result,'result')

def test_0085():
    # 0085 素材整理
    demand = """
我希望图片素材,保留原本的markdown格式, 如 
 ![出生东北_1](http://39.96.146.47:8000/11.jpg) 
"""
    @intellect(IntellectType.inference,"0085",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        return input_
    inputs_ = """
张三，男，1980年出生于北京，清华大学计算机系毕业，曾任职于Google、百度，现为某AI公司首席科学家。[{"title": "出生东北", "content": "我出生在东北辽宁葫芦岛下面的一个小村庄. 小时候，那里的生活比较简单，人们日出而作，日落而息，生活节奏非常有规律，也非常美好。当时我们都是山里的野孩子，没有什么特别的兴趣爱好，就在山里各种疯跑。我小时候特别喜欢晚上看星星，那时的夜晚星星非常多，真的是那种突然就能看到漫天繁星的感觉。\n ![出生东北_1](http://39.96.146.47:8000/11.jpg) ", "time": "1995年--月--日"}, {"title": "高中的时候", "content": "在我高中的时候，我对天文物理和理论物理就非常感兴趣。我当时高中是在我们县城里读的，资源没有那么丰富，我们所有的精力都放在学科的学习上。\n ![高中的时候_1](http://39.96.146.47:8000/11.jpg) ", "time": "1995年--月--日"}]
"""
    result = prompts(inputs_)
    print(result,'result')

def test_0086():
    # 0086 提取地名
    demand = """
提取地名
"""
    @intellect(IntellectType.inference,"0086",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    user_name = "柴东升"
    vitae = 12312
    result = prompts(f"{user_name},{vitae},{"\n".join(memory_cards)}")
    print(result,'result')

def test_0087():
    # 0087 提取人名
    demand = """
提取人名
"""
    @intellect(IntellectType.inference,"0087",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    user_name = "柴东升"
    vitae = 12312
    result = prompts(f"{user_name},{vitae},{"\n".join(memory_cards)}")
    print(result,'result')


def test_0088():
    # 0088 记忆卡片打分
    demand = """
记忆卡片打分
"""
    @intellect(IntellectType.inference,"0088",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    user_name = "柴东升"
    vitae = 12312
    result = prompts(f"{user_name},{vitae},{"\n".join(memory_cards)}")
    print(result,'result')


def test_0089():
    # 0089 记忆卡片合并
    demand = """
title 起一个合适的名称
"""
    @intellect(IntellectType.inference,"0089",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    
    inputs = """
出生东北
我出生在东北辽宁葫芦岛下面的一个小村庄。小时候，那里的生活比较简单，人们日出而作，日落而息，生活节奏非常有规律，也非常美好。当时我们都是山里的野孩子，没有什么特别的兴趣爱好，就在山里各种疯跑。我小时候特别喜欢晚上看星星，那时的夜晚星星非常多，真的是那种突然就能看到漫天繁星的感觉。高中的时候
在我高中的时候，我对天文物理和理论物理就非常感兴趣。我当时高中是在我们县城里读的，资源没有那么丰富，我们所有的精力都放在学科的学习上。
 各记忆卡片的时间
1995年--月--日
1997年--月--日
"""
    result = prompts(inputs)
    print(result,'result')

import json

def test_0090():
    # 0090 记忆卡片润色
    # TODO 这里查看数据库,  可能带来的问题, 考虑聊天历史的可能性 已经如何正确使用这个工具
    demand = """
输出去掉 time 属性, 将时间巧妙融入到内容中, 整体具有一些文采
"""
    @intellect(IntellectType.inference,"0090",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        input_ = json.loads(extract_json(input_))
        return input_
    inputs = """
记忆卡片标题: 我的小时候
记忆卡片内容: 我出生在东北辽宁葫芦岛下面的一个小村庄。小时候，那里的生活比较简单，人们日出而作，日落而息，生活节奏非常有规律，也非常美好。当时我们都是山里的野孩子，没有什么特别的兴趣爱好，就在山里各种疯跑。我小时候特别喜欢晚上看星星，那时的夜晚星星非常多，真的是那种突然就能看到漫天繁星的感觉。
在我高中的时候，我对天文物理和理论物理就非常感兴趣。我当时高中是在我们县城里读的，资源没有那么丰富，我们所有的精力都放在学科的学习上。
记忆卡片发生时间: 1995年--月--日
"""

    result = prompts(inputs)
    print(result,'result')


def test_0091():
    # 0091 通过文本生成记忆卡片-memory_card_system_prompt
    demand = """
通过文本生成记忆卡片
"""
    @intellect(IntellectType.inference,"0091",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    user_name = "柴东升"
    vitae = 12312
    result = prompts(f"{user_name},{vitae},{"\n".join(memory_cards)}")
    print(result,'result')

def test_0092():
    # 0092 通过文本生成记忆卡片-time_prompt
    demand = """
增加一个字段 topic => 它输出1- 7 的int 类型, 通过判断记忆卡片的归属类型确定, 下面给出了判断标准
1	出生与背景
2	性格与价值观
3	学习与成长
4	事业与成就
5	家庭与感情
6	社会关系
7	生活与体验
根据文本属于哪个类型来决定 topic 的值
"""
    @intellect(IntellectType.inference,"0092",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        input_ = extract_json(input_)
        return input_
    input = """
 # chat_history: 
很多人怕我，说王志民很凶，都不怎么讲话。他们不知道，我脚痛。每个小时痛，几十年痛。所以我不想讲话，没力气讲话。现在好多了，去台北做了个手术，三个钟头解决了我几十年的问题。回来后我就掏钱，让七百多个和我一样的人也做这个手术。
脚痛真是影响了我性格，说起来还是怪日本人。二次世界大战日本人打到东南亚，那时候我才一岁。有一天他们来空袭，警报响了，姐姐架起我就跑。我在姐姐脖子上没坐好，朝后摔下去。人摔下去了，脚还在姐姐手里，她抓得很紧啊。我的右脚就这样受的伤。那时候所有的人都忙着逃命，姐姐没告诉妈妈，我才一岁，更不会讲了。
但我疼啊，每天都在哭，哭了三个月，家里人不知道为什么。但哭肯定不好嘛，就去找郎中。郎中给我诊了脉，说我肚子里有虫子，开了打虫子的药方。我明明脚痛，他说我肚子里有虫子，你说害人不害人？
我就不会走路了。七岁以前，我都是在地上爬来爬去的。我看别的人，看周围的东西，都是趴在地上，都是仰着头。有人说这对一生都有影响，我不懂哦。但不知道为什么，到七岁我又会走了。一家人很高兴，我自己当然更高兴啦。但只走了两年又不行了，这下真的残疾了。脚就从那时开始痛，一直痛到现在。
九岁到二十岁，我不停进医院出医院。治了十一年，骨头都截了好几寸，还是没好。我没能好好上学，路都走不了怎么去学校呢？就断断续续在一间寺庙开的学堂里读书。说起来好笑，一年级我读了十年哦。所以因为这只脚，我没读过书，没什么文化。
这个社会很多人以貌取人的。泰国有个华裔协会，我第一次做会长的时候上台发言，刚到台上就有人喊，你下去你下去！我只好下去了。后来又有人喊，王志民会长请上台。我只好又上去。我理解他们。都看我貌不惊人，穿的不是名牌，走路还不方便，当然看不起我啦。其实他们哪里知道，我就是那个王志民会长，我就是嘉乐斯集团的大老板。
我做大了以后，就有些人妒忌我嘲笑我。他们拿潮州话骂我，都很难听。对不起，我普通话不好，也不太会讲话。可惜你们不懂潮州话。那意思是说你一个瘸子还爱出风头，其实你有什么呢？我只好回应了。我说我有两个太太啊，你们有吗？他们当然没有。我有两个太太，我两个太太是亲姐妹。
话是这么说，但我这个人从小有个习惯。别人说我什么不好，我就改什么，我很识趣的。大概这也跟脚不好有关系。所以后来开会，我都不太敢坐在主席台上了。你们说我喜欢出风头，我就不出风头。
可他们又说，你不就是想多拿几条国王给的绶带吗？是，国王认识我，见了很多次了嘛。虎年的时候国王给自己算了命，觉得有些冲，就让人给我打电话，叫我组织一些人去王宫里舞了一回狮，他不方便抛头露面，就在窗口远远地看。国王当我们华人自己人了，不是外国人，是自己人。
我很高兴。其实他们哪知道，我第一次觐见国王的时候，吓得话都说不出来了。别人到他面前，他都是很端正地坐着。到我上去的时候，他忽然探出身来问：“你的脚怎么回事？”我脑子一片空白啊，嘴里只会说“是是是”，赶快退下了，身上都是汗。你看，连国王都知道我的脚不好啦！脚不好，我这一辈子比别人多受很多苦的。我妈妈也跟着受了很多苦。讲到以前的事情啊，唉！我很想念妈妈。
 # chapter:我这一生比别人多受了很多苦，妈妈也跟着受了很多苦。很多人都怕我，说王志民很凶，不怎么讲话。他们不知道，我脚痛，每个小时都痛，几十年了。所以我不想讲话，没力气讲话。现在好多了，去台北做了个手术，三个钟头就解决了困扰我几十年的问题。回来后，我就掏钱让七百多个和我一样的人也做了这个手术。

我的脚痛真是影响了我的性格，说起来还是怪日本人。二次世界大战时，日本人打到东南亚，那时候我才一岁。有一天他们空袭，警报响了，姐姐架起我就跑。我在姐姐脖子上没坐好，朝后摔了下去。人摔下去了，脚还在姐姐手里，她抓得很紧。我的右脚就是这样受的伤。那时候所有的人都忙着逃命，姐姐没告诉妈妈，我才一岁，更不会讲。但我疼啊，每天都在哭，哭了三个月，家里人不知道为什么。哭肯定不好，就去找郎中。郎中给我诊了脉，说我肚子里有虫子，开了打虫子的药方。我明明脚痛，他却说我肚子里有虫子，你说害人不害人？

我就不会走路了。七岁以前，我都是在地上爬来爬去的。我看别的人，看周围的东西，都是趴在地上，仰着头。有人说这对一生都有影响，我不懂。但不知道为什么，到七岁我又会走了。一家人很高兴，我自己当然更高兴。但只走了两年又不行了，这下真的残疾了。脚就从那时开始痛，一直痛到现在。九岁到二十岁，我不停地进出医院，治了十一年，骨头都截了好几寸，还是没好。我没能好好上学，路都走不了怎么去学校呢？就断断续续地在一间寺庙开的学堂里读书。说起来好笑，一年级我读了十年。所以因为这只脚，我没读过书，没什么文化。我很想念妈妈。"""
    result = prompts(input)
    print(result,'result')


def test_0093():
    # 0093 上传文件生成记忆卡片-memory_card_system_prompt
    demand = """
聊天历史生成记忆卡片
"""
    @intellect(IntellectType.inference,"0093",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    user_name = "柴东升"
    vitae = 12312
    result = prompts(f"{user_name},{vitae},{"\n".join(memory_cards)}")
    print(result,'result')

def test_0094():
    # 0094 聊天历史生成记忆卡片-time_prompt
    demand = """
聊天历史生成记忆卡片
"""
    @intellect(IntellectType.inference,"0094",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        input_ = extract_json(input_)
        return input_
    user_name = "柴东升"
    vitae = 12312
    result = prompts(f"{user_name},{vitae},{"\n".join(memory_cards)}")
    print(result,'result')




def test_0095():
    # 0095 简要版传记
    demand = """

我希望你帮我将输出格式修改为如下格式, 同时书写文字控制在3000字左右

输出格式:  
```json
{
    "title":"标题",
    "content":"内容"
}
``` 
"""
    @intellect(IntellectType.inference,"0095",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        input_ = extract_json(input_)
        return input_
    input = """

柴东升,

'|    |                  id | name   | gender   | occupation   | birthdate          | birth_city      |   birth_address | current_city   |   current_address | created_time       | updated_time      |         app_user_id | nickname   |   avatar_url |   sound_url |   summary_end_memory_card_id |   del_flag |   status |   memory_card_status |   employee_id | speaker                           | open_words                           |   able_use_digital_body |   digital_body_num |
|---:|--------------------:|:-------|:---------|:-------------|:-------------------|:----------------|----------------:|:---------------|------------------:|:-------------------|:------------------|--------------------:|:-----------|-------------:|------------:|-----------------------------:|-----------:|---------:|---------------------:|--------------:|:----------------------------------|:-------------------------------------|------------------------:|-------------------:|
|  0 | 1962079258478915585 | 柴东升 | 男       | AI产品经理   | 17/1/2000 00:00:00 | 辽宁省 葫芦岛市 |             nan | 北京市 北京市  |               nan | 31/8/2025 17:05:24 | 4/9/2025 11:54:43 | 1962079083756793857 | 柴东升     |          nan |         nan |          1963426730509873154 |          0 |        0 |                    0 |         20000 | zh_male_yuanboxiaoshu_moon_bigtts | 你好，我是{}的AI分身，来和我聊聊吧！ |                       1 |                  1 |'

,出生东北
我出生在东北辽宁葫芦岛下面的一个小村庄。小时候，那里的生活比较简单，人们日出而作，日落而息，生活节奏非常有规律，也非常美好。当时我们都是山里的野孩子，没有什么特别的兴趣爱好，就在山里各种疯跑。我小时候特别喜欢晚上看星星，那时的夜晚星星非常多，真的是那种突然就能看到漫天繁星的感觉。
高中的时候
在我高中的时候，我对天文物理和理论物理就非常感兴趣。我当时高中是在我们县城里读的，资源没有那么丰富，我们所有的精力都放在学科的学习上。
"""
    result = prompts(input)
    print(result,'result')

def test_0096():
    # 0096 生成用户概述
    demand = """
帮我提取这个人的用户概述, 大概100字
"""
    @intellect(IntellectType.inference,"0096",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_
    old_dverview = "用户概述"
    result = prompts(old_dverview + "\n".join(memory_cards))
    print(result,'result')


def test_0097():
    # 0097 用户关系提取
    demand = """
我希望你可以从一段对话历史中, 提取如下的用户关系表, 如下

 {
            “小王”:  # 人物姓名
	    {
                “relationship”: "关系",
                "profession": "职业",
                "birthday”: "出生日期",
            },
            “大王”: {
                "relationship": "关系",
                "profession": "职业",
                "birthday": "出生日期",
            },
        }

我会提供给你新的聊天历史从新的聊天历史中提取信息

以
```json
内容

```
的格式输出
"""
    @intellect(IntellectType.inference,"0097",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_

    result = prompts(chat_history)
    print(result,'result')

def test_0098():
    # 0098 数字分身简介
    # TODO 内容太多
    demand = """
content 的内容为50字左右
"""
    @intellect(IntellectType.summary,"0098",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_

    inputs = """
出生东北
我出生在东北辽宁葫芦岛下面的一个小村庄。小时候，那里的生活比较简单，人们日出而作，日落而息，生活节奏非常有规律，也非常美好。当时我们都是山里的野孩子，没有什么特别的兴趣爱好，就在山里各种疯跑。我小时候特别喜欢晚上看星星，那时的夜晚星星非常多，真的是那种突然就能看到漫天繁星的感觉。高中的时候
在我高中的时候，我对天文物理和理论物理就非常感兴趣。我当时高中是在我们县城里读的，资源没有那么丰富，我们所有的精力都放在学科的学习上。
"""
    result = prompts(inputs)
    print(result,'result')

def test_0099():
    # 0099 数字分身性格提取
    demand = """
你可以将处理后的文字使用```article 内容 ```的方式返回给我
"""
    @intellect(IntellectType.inference,"0099",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return input_

    result = prompts("\n".join(memory_cards))
    print(result,'result')


def test_0100():
    # 0100 数字分身信息脱敏
    demand = "你可以将处理后的文字使用```article 内容 ```的方式返回给我"
    @intellect(IntellectType.inference,"0100",demand = demand,table_name = "llm_prompt")
    def prompts(input_):
        # 可以直接输出, 也可以编写后处理的逻辑 extract_json 等
        return extract_article(input_)

    result = prompts("我出生在东北辽宁葫芦岛下面的一个小村庄。小时候，那里的生活比较简单，人们日出而作，日落而息，生活节奏非常有规律，也非常美好。当时我们都是山里的野孩子，没有什么特别的兴趣爱好，就在山里各种疯跑。我小时候特别喜欢晚上看星星，那时的夜晚星星非常多，真的是那种突然就能看到漫天繁星的感觉。")
    
    super_print(result,'result')
